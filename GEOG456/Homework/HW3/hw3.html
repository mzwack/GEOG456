<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapel Hill Parks and Rec</title>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
     integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
     crossorigin=""/>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
     integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
     crossorigin=""></script>

    <script src="chapelhill_parks_and_rec.js"></script>

</head>
<body>
<h1>Chapel Hill Parks and Recreation Facilities</h1>
<div id="mapid"></div>

<style>
    #mapid { width: 1200px; height: 550px; }
</style>

<script>
    var osm = L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png", { maxZoom: 19 });
    var osmBZH= L.tileLayer("https://tile.openstreetmap.bzh/br/{z}/{x}/{y}.png", {maxZoom: 19});

    var map = L.map("mapid", {
        center: [35.9132, -79.0558],
        zoom: 13,
        layers: [osm]
    });
    var parkIcon = L.icon({
        iconUrl: "https://cdn-icons-png.flaticon.com/256/7311/7311052.png", 
        iconSize: [32, 32],
        iconAnchor: [16, 32],
        popupAnchor: [0, -32]
    });

    var parksLayer = L.geoJSON(ch_parks_and_rec, {
        pointToLayer: function (feature, latlng) {
            return L.marker(latlng, { icon: parkIcon });
        },
        onEachFeature: function (feature, layer) {
            var name = feature.properties.Facility_Name;
            var type = feature.properties.Facility_Type;
            var mainFeature = feature.properties.Main_Feature;
            var address = feature.properties.Facility_Address;

            var popupContent =
                "<strong>" + name + "</strong><br>" +
                "<em>Type: " + type + "</em><br>" +
                "Main Feature: " + mainFeature + "<br>" +
                "Address: " + address + "<br>";

            layer.bindPopup(popupContent);
        }
    }).addTo(map);

    var baseMaps = {
        "OpenStreetMap": osm,
        "OpenStreetMap BZH": osmBZH
    };

    var overlayMaps = {
        "Parks & Rec Facilities": parksLayer
    };

    L.control.layers(baseMaps, overlayMaps).addTo(map);
</script>
</body>
</html>
